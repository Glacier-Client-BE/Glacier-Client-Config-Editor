<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glacier Client Config Editor</title>
    <meta property="og:title" content="Glacier Client Config Editor" />
    <meta property="og:description" content="Configure your Glacier Client modules and settings online." />
    <meta property="og:image" content="https://placehold.co/1200x630/7289DA/FFFFFF?text=Glacier+Config+Editor" />
    <meta property="og:url" content="https://config.glacierclient.xyz" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@glacierclientbe" />
    <meta name="twitter:title" content="Glacier Client Config Editor" />
    <meta name="twitter:description" content="Configure your Glacier Client modules and settings online." />
    <meta name="twitter:image" content="https://placehold.co/1200x675/7289DA/FFFFFF?text=Glacier+Config+Editor" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.49.0/min/vs/loader.js"></script>
    <style>
        :root {
            --color-primary: #7289DA;
            --color-primary-dark: #5b6eae;
            --color-dark: #0F0F13;
            --color-dark-alt: #1A1A22;
            --color-darker: #0A0A0E;
            --color-text: #FFFFFF;
            --color-text-alt: #B0B0C0;
            --color-text-muted: #8A8A9A;
            --border-radius: 16px;
            --border-radius-sm: 8px;
            --border-radius-lg: 24px;
            --border-radius-pill: 50px;
            --transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.25);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.3);
            --shadow-glow: 0 0 20px rgba(114, 137, 218, 0.4);
            --container-width: 1200px;
            --glass-border-color: rgba(114, 137, 218, 0.2);
            --hover-bg: rgba(114, 137, 218, 0.1);
            --active-bg: rgba(114, 137, 218, 0.2);
            --input-bg: rgba(255, 255, 255, 0.1);
            --shadow-color: rgba(0, 0, 0, 0.3);
            --toggle-off-bg: #4A4A5E;
            --toggle-on-bg: var(--color-primary);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: var(--color-dark);
            color: var(--color-text);
            line-height: 1.6;
            overflow-x: hidden;
            font-weight: 400;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        .main-header {
            position: fixed;
            top: 1.5rem;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 1200px;
            background: rgba(26, 26, 34, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(114, 137, 218, 0.2);
            border-radius: var(--border-radius-pill);
            z-index: 1000;
            transition: var(--transition);
            box-shadow: var(--shadow);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1.5rem;
            height: 60px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            z-index: 1001;
        }

        .brand-logo {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            transition: var(--transition);
        }

        .brand:hover .brand-logo {
            transform: rotate(5deg) scale(1.05);
        }

        .brand-name {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--color-text);
            background: linear-gradient(90deg, var(--color-text), var(--color-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .version-tabs {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .version-tab {
            background: rgba(255, 255, 255, 0.05);
            color: var(--color-text-alt);
            border: 1px solid rgba(114, 137, 218, 0.2);
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius-pill);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .version-tab:hover {
            background: rgba(114, 137, 218, 0.1);
            color: var(--color-text);
            transform: translateY(-2px);
        }

        .version-tab.active {
            background: var(--color-primary);
            color: var(--color-text);
            border-color: var(--color-primary);
            box-shadow: 0 4px 12px rgba(114, 137, 218, 0.3);
        }

        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--color-text);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            z-index: 1001;
        }

        .panel {
            background: var(--color-dark-alt);
            padding: 2.5rem;
            border-radius: var(--border-radius);
            text-align: center;
            transition: var(--transition);
            border: 1px solid rgba(114, 137, 218, 0.1);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--color-primary), transparent);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }

        .panel:hover::before {
            transform: scaleX(1);
        }

        .panel:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-lg);
            border-color: rgba(114, 137, 218, 0.3);
        }

        .disclaimer-panel {
            background: var(--color-dark-alt);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            border: 1px solid rgba(114, 137, 218, 0.1);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .disclaimer-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .disclaimer-icon {
            color: var(--color-primary);
            font-size: 1.5rem;
        }

        .disclaimer-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-text);
        }

        .disclaimer-content {
            color: var(--color-text-alt);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            transition: var(--transition);
            text-decoration: none;
            position: relative;
            overflow: hidden;
            border-radius: var(--border-radius-pill);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.7s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--color-primary);
            color: var(--color-text);
            box-shadow: 0 5px 15px rgba(114, 137, 218, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(114, 137, 218, 0.6);
            background: var(--color-primary-dark);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--color-text);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-secondary:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .tab-content {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }

        .tab-content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .input-field, .select-field {
            background: var(--color-dark);
            color: var(--color-text);
            border: 2px solid var(--glass-border-color);
            padding: 0.8rem 1rem;
            border-radius: 8px;
            width: 100%;
            transition: border-color 0.3s ease, background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .input-field:focus, .select-field:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 10px rgba(114, 137, 218, 0.5);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--toggle-off-bg);
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--toggle-on-bg);
        }

        input:focus + .slider {
            box-shadow: 0 0 1px var(--toggle-on-bg);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .json-editor-container {
            border-radius: var(--border-radius);
            overflow: hidden;
            border: 1px solid var(--glass-border-color);
            box-shadow: var(--shadow);
            transition: border-color 0.5s ease-in-out, box-shadow 0.5s ease-in-out;
            min-height: 600px;
        }

        .panel h2 {
            color: var(--color-text);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--glass-border-color);
            padding-bottom: 0.8rem;
            display: flex;
            align-items: center;
        }

        .panel h2 i {
            color: var(--color-primary);
            margin-right: 0.75rem;
            transition: transform 0.3s ease;
        }

        .main-footer {
            border-top: 1px solid rgba(114, 137, 218, 0.2);
            padding: 3rem 0 2rem;
            background: var(--color-darker);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2rem;
            position: relative;
            margin-top: auto;
        }

        .footer-container {
            text-align: center;
            width: 100%;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-brand {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 1rem;
        }

        .footer-logo {
            width: 40px;
            height: 40px;
            border-radius: 10px;
        }

        .footer-social {
            display: flex;
            gap: 1.5rem;
        }

        .social-link {
            color: var(--color-text-alt);
            font-size: 1.5rem;
            transition: var(--transition);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
            text-decoration: none;
        }

        .social-link:hover {
            color: var(--color-primary);
            transform: translateY(-3px);
            background: rgba(114, 137, 218, 0.1);
        }

        .copyright-text {
            color: var(--color-text-muted);
            font-size: 0.9rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            width: 100%;
        }

        .animate-fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .animate-fade-in-up.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .delay-1 { transition-delay: 0.1s; }
        .delay-2 { transition-delay: 0.2s; }
        .delay-3 { transition-delay: 0.3s; }
        .delay-4 { transition-delay: 0.4s; }
        .delay-5 { transition-delay: 0.5s; }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid var(--color-primary);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 0.5rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @media (max-width: 1024px) {
            .version-tabs {
                gap: 0.25rem;
            }
            
            .version-tab {
                padding: 0.5rem 0.75rem;
                font-size: 0.8rem;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                padding: 1rem;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .version-tabs {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: rgba(15, 15, 19, 0.98);
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 999;
                display: none;
                gap: 1.5rem;
            }
            
            .version-tabs.active {
                display: flex;
            }
            
            .version-tab {
                width: 80%;
                max-width: 250px;
                padding: 1rem 1.5rem;
                font-size: 1rem;
                justify-content: center;
            }
            
            .panel {
                padding: 1.5rem;
            }
            
            .panel h2 {
                font-size: 1.5rem;
            }
            
            .json-editor-container {
                min-height: 400px;
            }
            
            .disclaimer-panel {
                padding: 1rem;
            }
            
            .btn {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 640px) {
            .main-header {
                width: 95%;
            }
            
            .container {
                padding: 0 1rem;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
            
            .footer-brand {
                align-items: center;
            }
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">
    <header class="main-header">
        <div class="container header-container">
            <div class="brand">
                <img src="assets/logo.png" alt="Glacier Client Logo" class="brand-logo" loading="lazy" />
                <span class="brand-name">Glacier</span>
            </div>
            
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="version-tabs" id="versionTabs">
                <button class="version-tab active" data-tab="v4">
                    <i class="fas fa-code-branch"></i> v4
                </button>
                <button class="version-tab" data-tab="v5">
                    <i class="fas fa-code-branch"></i> v5
                </button>
                <button class="version-tab" data-tab="v6">
                    <i class="fas fa-code-branch"></i> v6
                </button>
            </div>
        </div>
    </header>

    <main class="flex-grow pt-32 pb-12">
        <div class="container">
            <div class="disclaimer-panel animate-fade-in-up">
                <div class="disclaimer-header">
                    <i class="fas fa-exclamation-triangle disclaimer-icon"></i>
                    <h3 class="disclaimer-title">Important Disclaimer</h3>
                </div>
                <div class="disclaimer-content">
                    <p>Only edit the anchor and offset if you have knowledge about JSON UI. Replace each value with either true (automatically on) or false (automatically off) to make the config work. Mods are saved when leaving the world or entering another dimension. Only toggle between true/false, change opacity, mod position (read disclaimer), or item id/aux. Changing anything else may break the pack.</p>
                </div>
            </div>
            
            <div id="v4-tab-content" class="tab-content active">
                <div class="w-full grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="panel flex flex-col animate-fade-in-up delay-1">
                        <h2 class="text-2xl font-bold mb-6">
                            <i class="fas fa-sliders-h mr-2"></i>Module Configuration (v4)
                        </h2>
                        <div id="config-form-v4" class="space-y-6 overflow-auto max-h-[70vh] pr-4">
                            <p class="text-color-text-alt italic text-center">Loading configuration...</p>
                        </div>
                        <button id="download-config-btn-v4" class="btn btn-primary mt-8">
                            <i class="fas fa-download mr-2"></i> Download config.json
                        </button>
                    </div>

                    <div class="panel flex flex-col animate-fade-in-up delay-2">
                        <h2 class="text-2xl font-bold mb-6">
                            <i class="fas fa-code mr-2"></i>Raw config.json (v4)
                        </h2>
                        <div id="json-editor-container-v4" class="json-editor-container flex-grow"></div>
                        <button id="copy-json-btn-v4" class="btn btn-primary mt-4">
                            <i class="fas fa-copy mr-2"></i> Copy JSON
                        </button>
                    </div>
                </div>
            </div>
            
            <div id="v5-tab-content" class="tab-content">
                <div class="w-full grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="panel flex flex-col animate-fade-in-up delay-1">
                        <h2 class="text-2xl font-bold mb-6">
                            <i class="fas fa-sliders-h mr-2"></i>Module Configuration (v5)
                        </h2>
                        <div id="config-form-v5" class="space-y-6 overflow-auto max-h-[70vh] pr-4">
                            <p class="text-color-text-alt italic text-center">Loading configuration...</p>
                        </div>
                        <button id="download-config-btn-v5" class="btn btn-primary mt-8">
                            <i class="fas fa-download mr-2"></i> Download config.json
                        </button>
                    </div>

                    <div class="panel flex flex-col animate-fade-in-up delay-2">
                        <h2 class="text-2xl font-bold mb-6">
                            <i class="fas fa-code mr-2"></i>Raw config.json (v5)
                        </h2>
                        <div id="json-editor-container-v5" class="json-editor-container flex-grow"></div>
                        <button id="copy-json-btn-v5" class="btn btn-primary mt-4">
                            <i class="fas fa-copy mr-2"></i> Copy JSON
                        </button>
                    </div>
                </div>
            </div>
            
            <div id="v6-tab-content" class="tab-content">
                <div class="w-full grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="panel flex flex-col animate-fade-in-up delay-1">
                        <h2 class="text-2xl font-bold mb-6">
                            <i class="fas fa-sliders-h mr-2"></i>Module Configuration (v6)
                        </h2>
                        <div id="config-form-v6" class="space-y-6 overflow-auto max-h-[70vh] pr-4">
                            <p class="text-color-text-alt italic text-center">Loading configuration...</p>
                        </div>
                        <button id="download-config-btn-v6" class="btn btn-primary mt-8">
                            <i class="fas fa-download mr-2"></i> Download config.json
                        </button>
                    </div>

                    <div class="panel flex flex-col animate-fade-in-up delay-2">
                        <h2 class="text-2xl font-bold mb-6">
                            <i class="fas fa-code mr-2"></i>Raw config.json (v6)
                        </h2>
                        <div id="json-editor-container-v6" class="json-editor-container flex-grow"></div>
                        <button id="copy-json-btn-v6" class="btn btn-primary mt-4">
                            <i class="fas fa-copy mr-2"></i> Copy JSON
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="container footer-container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="assets/logo.png" alt="Glacier Client Logo" class="footer-logo" loading="lazy" />
                    <span class="brand-name">Glacier Client</span>
                </div>
                <div class="footer-social">
                    <a href="https://dsc.gg/glacierclientmcbe" class="social-link" target="_blank"><i class="fab fa-discord"></i></a>
                    <a href="https://github.com/glacierclientmcbe" class="social-link" target="_blank"><i class="fab fa-github"></i></a>
                    <a href="https://youtube.com/@glacierclient" class="social-link" target="_blank"><i class="fab fa-youtube"></i></a>
                    <a href="https://x.com/glacierclientbe" class="social-link" target="_blank"><i class="fab fa-twitter"></i></a>
                    <a href="https://www.instagram.com/glacierclientmcbe" class="social-link" target="_blank"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <p class="copyright-text">
                © <span id="currentYear"></span> Glacier Client. Not affiliated with Mojang/Microsoft
            </p>
        </div>
    </footer>

    <script type="module">
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const versionTabs = document.getElementById('versionTabs');
        const versionTabButtons = document.querySelectorAll('.version-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        mobileMenuToggle.addEventListener('click', () => {
            versionTabs.classList.toggle('active');
            mobileMenuToggle.innerHTML = versionTabs.classList.contains('active') 
                ? '<i class="fas fa-times"></i>' 
                : '<i class="fas fa-bars"></i>';
        });
        
        function switchTab(selectedTab) {
            versionTabButtons.forEach(button => {
                if (button.dataset.tab === selectedTab) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
            
            tabContents.forEach(content => {
                if (content.id === `${selectedTab}-tab-content`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            if (!window.loadedConfigs) window.loadedConfigs = {};
            
            if (!window.loadedConfigs[selectedTab]) {
                loadConfigFromFile(selectedTab);
            }
            
            if (window.innerWidth <= 768) {
                versionTabs.classList.remove('active');
                mobileMenuToggle.innerHTML = '<i class="fas fa-bars"></i>';
            }
        }
        
        versionTabButtons.forEach(button => {
            button.addEventListener('click', () => {
                switchTab(button.dataset.tab);
            });
        });
        
        async function loadConfigFromFile(version) {
            try {
                const response = await fetch(`configs/${version}.json`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const configData = await response.json();
                
                initializeConfigEditor(version, configData);
                
                window.loadedConfigs[version] = true;
            } catch (error) {
                console.error(`Error loading ${version} config:`, error);
                const configForm = document.getElementById(`config-form-${version}`);
                if (configForm) {
                    configForm.innerHTML = `<p class="text-color-text-alt text-center">Error loading configuration for ${version.toUpperCase()}. Please try again later.</p>`;
                }
            }
        }
        
        function initializeConfigEditor(version, configData) {
            const configForm = document.getElementById(`config-form-${version}`);
            const jsonEditorContainer = document.getElementById(`json-editor-container-${version}`);
            const downloadConfigBtn = document.getElementById(`download-config-btn-${version}`);
            const copyJsonBtn = document.getElementById(`copy-json-btn-${version}`);
            
            let currentConfig = configData;
            let monacoEditor;
            
            function sanitizeKeyForDisplay(key) {
                let displayKey = key.replace(/@gc\.pnl|\$|\|default/g, '')
                                    .replace(/_/g, ' ')
                                    .trim();
                return displayKey.replace(/\b\w/g, char => char.toUpperCase());
            }

            const anchorOptions = [
                "top_left", "top_middle", "top_right",
                "left_middle", "center", "right_middle",
                "bottom_left", "bottom_middle", "bottom_right"
            ];

            const chatToggleOptions = { 0: "Bottom Chat", 1: "Top Chat" };
            const hotbarToggleOptions = { 0: "Default", 1: "Connected", 2: "RGB" };
            const inventoryHudToggleOptions = { 0: "Horizontal", 1: "Vertical" };
            const mainhandDurabilityToggleOptions = { 0: "Absolute", 1: "Percentage" };

            function renderConfigForm(config) {
                configForm.innerHTML = '';
                const mainConfig = config["mod_menu_config@gc.pnl"];
                const pauseMenuConfig = config["pause_menu_config@gc.pnl"];
                const containerConfig = config["container_config@gc.pnl"];

                const createFormGroup = (label, inputHtml) => {
                    const div = document.createElement('div');
                    div.className = 'flex items-center justify-between gap-4';
                    const labelElem = document.createElement('label');
                    labelElem.className = 'text-color-text text-lg font-medium flex-grow';
                    labelElem.textContent = label;
                    div.appendChild(labelElem);
                    div.innerHTML += inputHtml;
                    return div;
                };

                const createSectionHeader = (title) => {
                    const h3 = document.createElement('h3');
                    h3.className = 'text-xl font-semibold text-color-primary mt-6 mb-4 border-b border-glass-border-color pb-2';
                    h3.textContent = title;
                    return h3;
                };

                configForm.appendChild(createSectionHeader('Modules Configuration'));
                for (const key in mainConfig) {
                    if (mainConfig.hasOwnProperty(key)) {
                        const cleanKey = key.replace(/\|default/g, '');
                        const displayLabel = sanitizeKeyForDisplay(key);
                        let inputHtml = '';
                        let value = mainConfig[key];

                        const dataOriginalKey = `data-original-key="${key}"`;

                        if (cleanKey.startsWith('$hotbar_number')) {
                            inputHtml = `<input type="text" id="${cleanKey}" ${dataOriginalKey} value="${value}" class="input-field w-auto min-w-[100px] text-center" />`;
                        } else if (cleanKey.endsWith('_item_id') || cleanKey.endsWith('_aux')) {
                            inputHtml = `<input type="number" id="${cleanKey}" ${dataOriginalKey} value="${value}" class="input-field w-auto min-w-[120px] text-center" />`;
                        } else if (Array.isArray(value) && value.length === 2) {
                            inputHtml = `
                                <div class="flex gap-2">
                                    <input type="number" id="${cleanKey}_x" ${dataOriginalKey} value="${value[0]}" class="input-field w-24 text-center" placeholder="X" />
                                    <input type="number" id="${cleanKey}_y" ${dataOriginalKey} value="${value[1]}" class="input-field w-24 text-center" placeholder="Y" />
                                </div>
                            `;
                        } else if (typeof value === 'boolean') {
                            inputHtml = `
                                <label class="toggle-switch">
                                    <input type="checkbox" id="${cleanKey}" ${dataOriginalKey} ${value ? 'checked' : ''}>
                                    <span class="slider"></span>
                                </label>
                            `;
                        } else if (typeof value === 'number' && key.includes('opacity')) {
                            inputHtml = `
                                <div class="flex items-center gap-2 w-full max-w-[200px]">
                                    <input type="range" id="${cleanKey}_range" ${dataOriginalKey} min="0" max="1" step="0.01" value="${value}" class="flex-grow h-2 rounded-lg appearance-none cursor-pointer bg-color-primary/50" />
                                    <input type="number" id="${cleanKey}_number" ${dataOriginalKey} min="0" max="1" step="0.01" value="${value}" class="input-field w-20 text-center" />
                                </div>
                            `;
                        } else if (typeof value === 'string' && key.includes('anchor')) {
                            const optionsHtml = anchorOptions.map(opt => `<option value="${opt}" ${value === opt ? 'selected' : ''}>${sanitizeKeyForDisplay(opt)}</option>`).join('');
                            inputHtml = `
                                <select id="${cleanKey}" ${dataOriginalKey} class="select-field w-auto min-w-[150px]">
                                    ${optionsHtml}
                                </select>
                            `;
                        } else if (cleanKey === '$chat_toggle_index') {
                            const optionsHtml = Object.entries(chatToggleOptions).map(([idx, label]) => `<option value="${idx}" ${value == idx ? 'selected' : ''}>${label}</option>`).join('');
                            inputHtml = `<select id="${cleanKey}" ${dataOriginalKey} class="select-field w-auto min-w-[150px]">${optionsHtml}</select>`;
                        } else if (cleanKey === '$hotbar_toggle_index') {
                            const optionsHtml = Object.entries(hotbarToggleOptions).map(([idx, label]) => `<option value="${idx}" ${value == idx ? 'selected' : ''}>${label}</option>`).join('');
                            inputHtml = `<select id="${cleanKey}" ${dataOriginalKey} class="select-field w-auto min-w-[150px]">${optionsHtml}</select>`;
                        } else if (cleanKey === '$inventoryhud_toggle_index') {
                            const optionsHtml = Object.entries(inventoryHudToggleOptions).map(([idx, label]) => `<option value="${idx}" ${value == idx ? 'selected' : ''}>${label}</option>`).join('');
                            inputHtml = `<select id="${cleanKey}" ${dataOriginalKey} class="select-field w-auto min-w-[150px]">${optionsHtml}</select>`;
                        } else if (cleanKey === '$mainhand_durability_toggle_index') {
                            const optionsHtml = Object.entries(mainhandDurabilityToggleOptions).map(([idx, label]) => `<option value="${idx}" ${value == idx ? 'selected' : ''}>${label}</option>`).join('');
                            inputHtml = `<select id="${cleanKey}" ${dataOriginalKey} class="select-field w-auto min-w-[150px]">${optionsHtml}</select>`;
                        } else if (typeof value === 'number') {
                            inputHtml = `<input type="number" id="${cleanKey}" ${dataOriginalKey} value="${value}" class="input-field w-auto min-w-[100px] text-center" />`;
                        } else {
                            console.warn("Unhandled type for key:", key, value);
                            inputHtml = `<input type="text" id="${cleanKey}" ${dataOriginalKey} value="${JSON.stringify(value)}" class="input-field" disabled />`;
                        }

                        configForm.appendChild(createFormGroup(displayLabel, inputHtml));
                    }
                }

                configForm.appendChild(createSectionHeader('Pause Menu Configuration'));
                for (const key in pauseMenuConfig) {
                    if (pauseMenuConfig.hasOwnProperty(key)) {
                        const displayLabel = sanitizeKeyForDisplay(key);
                        const value = pauseMenuConfig[key];
                        const inputHtml = `
                            <label class="toggle-switch">
                                <input type="checkbox" id="${key}" data-original-key="${key}" ${value ? 'checked' : ''}>
                                <span class="slider"></span>
                            </label>
                        `;
                        configForm.appendChild(createFormGroup(displayLabel, inputHtml));
                    }
                }

                configForm.appendChild(createSectionHeader('Container Configuration'));
                for (const key in containerConfig) {
                    if (containerConfig.hasOwnProperty(key)) {
                        const displayLabel = sanitizeKeyForDisplay(key);
                        const value = containerConfig[key];
                        const inputHtml = `
                            <label class="toggle-switch">
                                <input type="checkbox" id="${key}" data-original-key="${key}" ${value ? 'checked' : ''}>
                                <span class="slider"></span>
                            </label>
                        `;
                        configForm.appendChild(createFormGroup(displayLabel, inputHtml));
                    }
                }

                configForm.addEventListener('input', updateConfigFromForm);
                configForm.addEventListener('change', updateConfigFromForm);

                const formAnimatedElements = configForm.querySelectorAll('.animate-fade-in-up');
                formAnimatedElements.forEach(element => {
                    element.classList.add('is-visible');
                });
            }

            function updateConfigFromForm(event) {
                const target = event.target;
                const originalKey = target.dataset.originalKey || target.id;
                const value = target.value;
                const type = target.type;

                let sectionKey = "mod_menu_config@gc.pnl";
                if (originalKey.includes('pause_menu_config')) sectionKey = "pause_menu_config@gc.pnl";
                else if (originalKey.includes('container_config')) sectionKey = "container_config@gc.pnl";

                if (type === 'checkbox') {
                    currentConfig[sectionKey][originalKey] = target.checked;
                } else if (type === 'range' || (type === 'number' && originalKey.includes('opacity'))) {
                    const numValue = parseFloat(value);
                    currentConfig[sectionKey][originalKey] = numValue;
                    const cleanKey = originalKey.replace(/\|default/g, '');
                    document.getElementById(`${cleanKey}_range`).value = numValue;
                    document.getElementById(`${cleanKey}_number`).value = numValue;
                } else if (type === 'number' && (originalKey.endsWith('_item_id') || originalKey.endsWith('_aux') || originalKey.endsWith('_preset_index') || originalKey.endsWith('_toggle_index'))) {
                    currentConfig[sectionKey][originalKey] = parseInt(value, 10);
                } else if (originalKey.endsWith('_offset|default')) {
                    const cleanKey = originalKey.replace(/\|default/g, '');
                    const xInput = document.querySelector(`[data-original-key="${originalKey}"][id="${cleanKey}_x"]`);
                    const yInput = document.querySelector(`[data-original-key="${originalKey}"][id="${cleanKey}_y"]`);

                    currentConfig[sectionKey][originalKey] = [parseFloat(xInput.value), parseFloat(yInput.value)];
                } else {
                    currentConfig[sectionKey][originalKey] = value;
                }

                updateMonacoEditor();
            }

            function initializeMonacoEditor() {
                require.config({ paths: { 'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.49.0/min/vs' } });
                require(['vs/editor/editor.main'], () => {
                    monacoEditor = monaco.editor.create(jsonEditorContainer, {
                        value: JSON.stringify(currentConfig, null, 4),
                        language: 'json',
                        theme: 'vs-dark',
                        readOnly: false,
                        automaticLayout: false,
                        minimap: { enabled: false }
                    });

                    window.addEventListener('resize', () => {
                        if (monacoEditor) {
                            monacoEditor.layout();
                        }
                    });

                    let monacoUpdateTimeout;
                    monacoEditor.onDidChangeModelContent(() => {
                        clearTimeout(monacoUpdateTimeout);
                        monacoUpdateTimeout = setTimeout(() => {
                            const jsonText = monacoEditor.getValue();
                            try {
                                const parsedJson = JSON.parse(jsonText);
                                currentConfig = parsedJson;
                                renderConfigForm(currentConfig);
                            } catch (e) {
                                if (jsonText.trim() !== "") {
                                    console.error("Invalid JSON format in editor. Form not updated.", e);
                                }
                            }
                        }, 500);
                    });
                });
            }

            function updateMonacoEditor() {
                if (monacoEditor) {
                    const currentEditorValue = monacoEditor.getValue();
                    const newEditorValue = JSON.stringify(currentConfig, null, 4);
                    if (currentEditorValue !== newEditorValue) {
                        monacoEditor.setValue(newEditorValue);
                    }
                }
            }

            downloadConfigBtn.addEventListener('click', () => {
                const blob = new Blob([JSON.stringify(currentConfig, null, 4)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'config.json';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            copyJsonBtn.addEventListener('click', () => {
                if (monacoEditor) {
                    const textToCopy = monacoEditor.getValue();
                    const tempTextArea = document.createElement('textarea');
                    tempTextArea.value = textToCopy;
                    document.body.appendChild(tempTextArea);
                    tempTextArea.select();
                    try {
                        document.execCommand('copy');
                    } catch (err) {
                        console.error('Failed to copy text: ', err);
                    }
                    document.body.removeChild(tempTextArea);
                }
            });

            renderConfigForm(currentConfig);
            initializeMonacoEditor();
        }
        
        window.onload = () => {
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            window.loadedConfigs = {};
            
            loadConfigFromFile('v4');
            
            const mainPanels = document.querySelectorAll('.panel.animate-fade-in-up');
            mainPanels.forEach(panel => {
                panel.classList.add('is-visible');
            });
            
            const disclaimerPanel = document.querySelector('.disclaimer-panel');
            disclaimerPanel.classList.add('is-visible');
        };
    </script>
</body>
</html>
